{% extends 'blog/base.html' %}

{% block content %}

<h2>All Posts</h2>

<!-- Search Bar -->
<form method="get" action="{% url 'post-search' %}">
    <input type="text" name="q" placeholder="Search posts...">
    <button type="submit">Search</button>
</form>

<hr>

{% for post in posts %}
  <div>
    <h3>
      <a href="{% url 'post-detail' post.pk %}">
        {{ post.title }}
      </a>
    </h3>

    <p>{{ post.content|truncatewords:20 }}</p>

    <p>
      By {{ post.author }} |
      {{ post.published_date }}
    </p>
{% endfor %}
    <!-- Tags Section -->
<p>
  Tags:
  {% for tag in post.tags.all %}
    <a href="{% url 'posts-by-tag' tag.name %}">
      {{ tag.name }}
    </a>{% if not forloop.last %}, {% endif %}
  {% empty %}
    No tags
  {% endfor %}
</p>

{% endblock content %}